using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApp2
{
    public struct Food
    {
        public PictureBox picture;
        public Label labelPrice;//цена
        public Label labelName;//название на форме (отоброжается)
        public string name;
        public int price;
        public string category;

        public Food(string _name, int _price, string _category)
        {
            labelName = new Label();
            labelPrice = new Label();
            picture = new PictureBox();

            category = _category;
            name = _name;
            price = _price;
        }
    }

    public partial class Продукты : Form
    {
        public static List<Food> eda = new List<Food>();


        //public static Korzina[] korz = new Korzina[10];
        /// <summary>
        /// Собираем хавчик пацанам на зону
        /// </summary>
        public static List<Food> aue = new List<Food>();
        //создание словаря полезно
        public static Dictionary<Food, int> korz228 = new Dictionary<Food, int>();

        public static string akkaunt = "";
        public Продукты()
        {
            InitializeComponent();
            loginLabel.Text = akkaunt + "2";
            // this.WindowState = FormWindowState.Maximized;
            //this.Width = Screen.PrimaryScreen.WorkingArea.Width;
            //this.Height = Screen.PrimaryScreen.WorkingArea.Height;

            //this.FormBorderStyle = FormBorderStyle.None;
            //this.WindowState = System.Windows.Forms.FormWindowState.Maximized;




            eda.Add(new Food("овощи", 100, "Овощи"));
            eda.Add(new Food("пицца", 50, "Фастфуд"));
            eda.Add(new Food("Огурец", 1000, "Овощи"));
            eda.Add(new Food("Томат", 9, "овощи"));
            eda.Add(new Food("Мороженное", 75, "Фрукты"));
            eda.Add(new Food("Банан", 4, "Фрукты"));
            eda.Add(new Food("Груша", 25, "Фрукты"));
            eda.Add(new Food("Кокос", 7590, "Фрукты"));
            eda.Add(new Food("Яблоко", 15, "Фрукты"));
            eda.Add(new Food("Бургер", 15, "Фастфуд"));
            eda.Add(new Food("Яблочный Сок", 150, "Соки"));
            eda.Add(new Food("Грушевый Сок", 150, "Соки"));
            eda.Add(new Food("Вишневый сок", 150, "Соки"));
            eda.Add(new Food("Апельсиновый сок", 150, "Соки"));
            eda.Add(new Food("Мультифруктовый сок", 150, "Соки"));

            /*eda[0].name = "овощи";
            eda[0].price = 100;
            eda[1].name = "фастфуд";
            eda[1].price = 50;
            eda[2].name = "Огурец";
            eda[2].price = 1000;
            eda[2].category = "фрукт";*/

            //время
            label1.Text = DateTime.Now.ToString("");

            int x = 10;
            int y = 10;
            for (int i = 0; i < eda.Count; i++)
            {
                //--------------Картинка--------------------------------------
                eda[i].picture.Location = new Point(x, y);
                eda[i].picture.SizeMode = PictureBoxSizeMode.Zoom;
                eda[i].picture.Tag = eda[i].name;
                

                eda[i].picture.Size = new Size(150, 150);
                try//попытка загрузить картинку либо jpj либо png либо до связи
                {
                    eda[i].picture.Load("../../../Продукты/" + eda[i].name + ".jpg");
                }
                catch (Exception)
                {
                    try
                    {
                        eda[i].picture.Load("../../../Продукты/" + eda[i].name + ".png");
                    }
                    catch (Exception ex) { MessageBox.Show(ex.Message); }
                }
                eda[i].picture.Click += new EventHandler(pictureBox1_Click);
                panel1.Controls.Add(eda[i].picture);

                //--------------Цена--------------------------------------
                if (eda[i].price <100)
                {
                    eda[i].labelPrice.ForeColor = Color.Red;
                }
                eda[i].labelPrice.Location = new Point(x + 110, y + 150);
                //eda[i].labelPrice.Location = new Point(eda[i].picture.Location.X + 130, eda[i].picture.Location.Y + 150);
            

                eda[i].labelPrice.Size = new Size(50, 30);
                eda[i].labelPrice.Text = eda[i].price.ToString();
                panel1.Controls.Add(eda[i].labelPrice);

                //-----------------название----------------------------------------------
                eda[i].labelName.Font = new Font("Tahoma", 9, FontStyle.Bold);

                eda[i].labelName.Location = new Point(x, y + 150);

                eda[i].labelName.Size = new Size(100, 30);
                eda[i].labelName.Text = eda[i].name;
                panel1.Controls.Add(eda[i].labelName);

                x = x + 160;//регулируется выход за рамки экрана если еды много
                if (x + 120 > panel1.Width)
                {
                    y = y + 180;
                    x = 10;

                    eda[i].labelPrice.Location = new Point(eda[i].picture.Location.X + 130, eda[i].picture.Location.Y + 150);
                }

                //------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

            }
        }

        //сортировка по цене и названию
        private void button2_Click(object sender, EventArgs e)
        {
            int x = 10;
            int y = 10;
            for (int i = 0; i < eda.Count; i++)
            {
                eda[i].picture.Visible = true;

                if (Poisk.Text != "" &&
                    !eda[i].name.ToUpper().Contains(Poisk.Text.ToUpper()))//по названию
                    eda[i].picture.Visible = false;

                if (x + 120 > panel1.Width)
                {
                    y = y + 180;
                    x = 10;

                    eda[i].labelPrice.Location = new Point(eda[i].picture.Location.X + 130, eda[i].picture.Location.Y + 150);
                }

                //-----------------категория(фрукты, овощи)-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
                bool categoryExist = false;
                foreach (string cat in categorys.CheckedItems)
                {
                    if (eda[i].category == cat)
                        categoryExist = true;
                }
                if (!categoryExist && categorys.CheckedItems.Count > 0)
                {
                    eda[i].picture.Visible = false;
                }

                try
                {
                    if (price.Text != "" &&
                    Convert.ToInt32(price.Text) <= eda[i].price)//по цене
                        eda[i].picture.Visible = false;
                }
                catch (Exception) { }

                if (eda[i].picture.Visible)
                {
                    eda[i].picture.Location = new Point(x, y);
                    eda[i].labelName.Location = new Point(x, y + 150);
                    eda[i].labelPrice.Location = new Point(x+100, y + 150);
                    x = x + 160;
                    if (x + 120 > Width)
                    {
                        y = y + 180;
                        x = 10;
                    }
                }


                eda[i].labelName.Visible = eda[i].picture.Visible;
                eda[i].labelPrice.Visible = eda[i].picture.Visible;
            }
        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {
            PictureBox pb = (PictureBox)sender;
            ProductForm newForm = new ProductForm(pb.Tag.ToString());
            newForm.Show();
        }

        private void panel1_Paint(object sender, PaintEventArgs e)
        {

        }

        private void pictureBox1_Click_1(object sender, EventArgs e)
        {
           // MessageBox.Show("Ты лох?", "Предупреждение", MessageBoxButtons.YesNoCancel);
            Korzina newForm = new Korzina();
            newForm.Show();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Registr newForm = new Registr();
            newForm.ShowDialog();
            loginLabel.Text = akkaunt;
        }

        private void categorys_ItemCheck(object sender, ItemCheckEventArgs e)
        {
        }

        private void poisk_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Enter)
                button2_Click(null, null);
        }
    }
}
